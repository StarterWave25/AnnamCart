<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Alata&family=Outfit:wght@100..900&display=swap" rel="stylesheet">


<div class="logo-container">
    <a href="index.php">
        <h1 class="for-gradient">AnnamCart</h1>
    </a>
</div>
<div class="Aent-navbar">
    <ul class="Options">
        <li class="Option1"><a href="activepage.html">Home</a></li>
        <li class="Option2"><a href="index.php">Earning</a></li>
        <li class="Option3"><button class="statechanger">Inactive</button></li>
    </ul>
    <script>
        const stateBtn = document.querySelector('.statechanger');
        let agentState = sessionStorage.getItem('status') || 'inactive';

        if (agentState === 'active') {
            stateBtn.textContent = 'Active';
            stateBtn.style.background = 'green';
            agentState = 'active';
        }
        
        stateBtn.addEventListener('click', () => {
            if (agentState === 'inactive') {
                stateBtn.textContent = 'Active';
                stateBtn.style.background = 'green';
                agentState = 'active';
            }
            else {
                stateBtn.textContent = 'Inactive';
                stateBtn.style.background = 'red';
                agentState = 'inactive';
            }
            setStatus(agentState);
            sessionStorage.setItem('status', agentState);
        });

        async function setStatus(status) {
            const request = await fetch('data/data-status.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(status)
            });
            const response = await request.json();
            console.log(response);
        }
    </script>
</div>